<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NAS RAM Planner</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <!-- Tutorial Overlay -->
    <div id="tutorial-overlay" class="tutorial-overlay">
        <div class="tutorial-modal">
            <div class="tutorial-header">
                <h2 id="tutorial-title">Welcome to NAS RAM Planner</h2>
                <button class="tutorial-close" onclick="closeTutorial()">×</button>
            </div>
            <div class="tutorial-content">
                <p id="tutorial-text">Let's get you started with planning your NAS upgrade!</p>
                <div class="tutorial-highlight" id="tutorial-highlight"></div>
            </div>
            <div class="tutorial-footer">
                <button class="tutorial-btn-secondary" onclick="closeTutorial()">Skip</button>
                <div class="tutorial-dots" id="tutorial-dots"></div>
                <button class="tutorial-btn-primary" onclick="nextTutorialStep()">Next</button>
            </div>
        </div>
    </div>

    <h1>NAS RAM Planner</h1>
    <p style="text-align: center; color: #94a3b8; margin: -20px 0 40px 0; padding: 0; background: none; border: none;">Plan your NAS upgrade with confidence</p>
    
    <!-- Quick Presets -->
    <div class="presets-container">
        <h2>Quick Start</h2>
        <div class="preset-grid">
            <button class="preset-card" onclick="loadPreset('home')">
                <img src="1.png" alt="Home NAS" class="preset-icon" />
                <div class="preset-name">Home NAS</div>
                <div class="preset-desc">2-4 drives, backup & media</div>
            </button>
            <button class="preset-card" onclick="loadPreset('media')">
                <img src="2.png" alt="Media Server" class="preset-icon" />
                <div class="preset-name">Media Server</div>
                <div class="preset-desc">4+ drives, streaming</div>
            </button>
            <button class="preset-card" onclick="loadPreset('vm')">
                <img src="3.png" alt="VM Host" class="preset-icon" />
                <div class="preset-name">VM Host</div>
                <div class="preset-desc">Heavy compute workload</div>
            </button>
            <button class="preset-card" onclick="loadPreset('enterprise')">
                <img src="4.png" alt="Enterprise" class="preset-icon" />
                <div class="preset-name">Enterprise</div>
                <div class="preset-desc">High availability setup</div>
            </button>
        </div>
    </div>

    <!-- Main Configuration Grid -->
    <div class="config-grid">
        <!-- Hardware Section -->
        <div>
            <h2>Hardware</h2>
            
            <label for="nas-model">NAS Model</label>
            <input type="text" id="nas-model" placeholder="e.g., Synology DS920+" oninput="calculateRAM()" />

            <label for="current-ram">Current RAM</label>
            <input type="number" id="current-ram" placeholder="4" oninput="calculateRAM()" />
            
            <label for="max-ram">Max Supported RAM</label>
            <input type="number" id="max-ram" placeholder="32" oninput="calculateRAM()" />

            <label for="cpu-cores">CPU Cores</label>
            <input type="number" id="cpu-cores" placeholder="4" oninput="calculateRAM()" />

            <label for="ddr-type">RAM Type</label>
            <select id="ddr-type" onchange="calculateRAM()">
                <option value="ddr3">DDR3</option>
                <option value="ddr4" selected>DDR4</option>
                <option value="ddr5">DDR5</option>
            </select>
        </div>

        <!-- Storage Section -->
        <div>
            <h2>Storage</h2>
            
            <label for="num-drives">Number of Drives</label>
            <input type="number" id="num-drives" placeholder="4" oninput="calculateRAM()" />
            
            <label for="drive-capacity">Drive Capacity (GB)</label>
            <input type="number" id="drive-capacity" placeholder="2000" oninput="calculateRAM()" />
            
            <label for="raid-type">RAID Type <button type="button" class="info-btn" onclick="showRAIDInfo()">ⓘ</button></label>
            <select id="raid-type" onchange="calculateRAM()">
                <option value="">Select RAID</option>
                <option value="raid0">RAID 0</option>
                <option value="raid1">RAID 1</option>
                <option value="raid5">RAID 5</option>
                <option value="raid6">RAID 6</option>
                <option value="raid10">RAID 10</option>
            </select>
            
            <!-- RAID Info Popup -->
            <div id="raid-popup" class="info-popup" style="display: none;">
                <div class="info-popup-content">
                    <button type="button" class="info-popup-close" onclick="hideRAIDInfo()">×</button>
                    <h3>RAID Types Explained</h3>
                    <div class="raid-info-list">
                        <div class="raid-info-item">
                            <strong>RAID 0:</strong> No redundancy, maximum capacity, fastest. Data loss if any drive fails.
                        </div>
                        <div class="raid-info-item">
                            <strong>RAID 1:</strong> Mirror, 50% capacity, excellent redundancy. Good for small drives.
                        </div>
                        <div class="raid-info-item">
                            <strong>RAID 5:</strong> Parity, 67% capacity, good balance. One drive failure tolerated.
                        </div>
                        <div class="raid-info-item">
                            <strong>RAID 6:</strong> Dual parity, 50% capacity, excellent protection. Two drive failures tolerated.
                        </div>
                        <div class="raid-info-item">
                            <strong>RAID 10:</strong> Mirrored stripe, 50% capacity, high performance. Mirroring + striping.
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Workload Section -->
        <div>
            <h2>Workload</h2>
            
            <label for="primary-use">Primary Use Case</label>
            <select id="primary-use" onchange="calculateRAM()">
                <option value="">Select Use Case</option>
                <option value="backup">Backup Storage</option>
                <option value="media">Media Server</option>
                <option value="vm">Virtual Machines</option>
                <option value="database">Database</option>
                <option value="mixed">Mixed Workload</option>
            </select>
            
            <label for="num-users">Concurrent Users</label>
            <input type="number" id="num-users" placeholder="5" oninput="calculateRAM()" />

            <label for="os-type">Operating System</label>
            <select id="os-type" onchange="calculateRAM()">
                <option value="">Select OS</option>
                <option value="synology">Synology DSM</option>
                <option value="unraid">Unraid</option>
                <option value="truenas">TrueNAS</option>
                <option value="openmediavault">OpenMediaVault</option>
                <option value="ubuntu">Ubuntu Server</option>
                <option value="custom">Custom Linux</option>
            </select>
        </div>

        <!-- Preferences Section -->
        <div>
            <h2>Preferences</h2>
            
            <label for="priority">Priority</label>
            <select id="priority" onchange="calculateRAM()">
                <option value="balanced">Balanced</option>
                <option value="cost">Cost Effective</option>
                <option value="performance">Performance</option>
            </select>

            <label for="internet-connected">Internet Connected</label>
            <select id="internet-connected" onchange="calculateRAM()">
                <option value="yes">Yes</option>
                <option value="no">No</option>
            </select>

            <label for="budget">Budget ($)</label>
            <input type="number" id="budget" placeholder="200" oninput="calculateRAM()" />

            <label for="network-speed">Network Speed</label>
            <select id="network-speed" onchange="calculateRAM()">
                <option value="">Select Speed</option>
                <option value="1">1 Gbps</option>
                <option value="2.5">2.5 Gbps</option>
                <option value="10">10 Gbps</option>
                <option value="25">25 Gbps</option>
            </select>

            <label for="remote-access">Remote Access Method <a href="https://en.wikipedia.org/wiki/Tunneling_protocol" target="_blank" title="Learn more about tunneling vs port forwarding">ⓘ</a></label>
            <select id="remote-access" onchange="calculateRAM()">
                <option value="none">None</option>
                <option value="port-forward">Port Forwarding</option>
                <option value="tunnel">Tunneling (VPN/SSH)</option>
            </select>

            <label for="bot-protection">Bot/Malware Protection <a href="https://en.wikipedia.org/wiki/Zip_bomb" target="_blank" title="Learn about zip bomb protection">ⓘ</a></label>
            <select id="bot-protection" onchange="calculateRAM()">
                <option value="none">None</option>
                <option value="basic">Basic Scanning</option>
                <option value="advanced">Advanced Protection</option>
            </select>
        </div>
    </div>

    <!-- Results Section -->
    <div class="results-container">
        <!-- Recommendation Card -->
        <div class="recommendation-card">
            <h2>Recommendation</h2>
            <div class="recommendation-box">
                <div class="ram-big-number" id="recommended-ram-big">0GB</div>
                <div class="recommendation-detail">
                    <span id="recommendation-text">Enter values to see recommendation</span>
                </div>
            </div>
            
            <div class="button-group">
                <button onclick="calculateRAM()">Calculate</button>
                <button onclick="resetForm()" style="background-color: #64748b;">Reset</button>
            </div>
        </div>

        <!-- Visualization Card -->
        <div class="visualization-card">
            <h2>RAM Usage</h2>
            
            <div class="ram-visualizer">
                <div class="ram-label">Total Capacity vs Need</div>
                <div class="ram-bar">
                    <div class="ram-current" id="ram-used-bar" style="width: 0%">
                        <span id="ram-used-text">0GB</span>
                    </div>
                    <div class="ram-recommended" id="ram-needed-bar" style="width: 0%">
                        <span id="ram-needed-text">0GB</span>
                    </div>
                </div>
                
                <div class="ram-stats">
                    <div>Total Capacity: <strong id="ram-max-display">0GB</strong></div>
                    <div>Total Need: <strong id="ram-total-display">0GB</strong></div>
                </div>
                
                <div class="ram-legend">
                    <div class="legend-item">
                        <div class="legend-color color-current"></div>
                        <span>Current RAM</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color color-recommended"></div>
                        <span>Additional Needed</span>
                    </div>
                </div>
                
                <div id="tier-display"></div>
            </div>
        </div>
    </div>

    <!-- Summary Cards -->
    <div class="summary-cards">
        <div class="summary-card">
            <img src="save.png" alt="Current Setup" class="summary-icon" />
            <div class="summary-label">Current Setup</div>
            <div class="summary-value" id="summary-current">0GB / 0GB</div>
        </div>
        <div class="summary-card">
            <img src="storage.png" alt="Total Storage" class="summary-icon" />
            <div class="summary-label">Total Storage</div>
            <div class="summary-value" id="summary-storage">0GB</div>
        </div>
        <div class="summary-card">
            <img src="cost.png" alt="Est. Cost" class="summary-icon" />
            <div class="summary-label">Estimated Cost of RAM</div>
            <div class="summary-value" id="summary-cost">$0</div>
        </div>
        <div class="summary-card">
            <img src="storage.png" alt="Usable Storage" class="summary-icon" />
            <div class="summary-label">Usable (After RAID)</div>
            <div class="summary-value" id="summary-usable">0GB</div>
        </div>
    </div>

    <!-- Notes Card -->
    <div class="notes-card">
        <h2>Configuration Notes</h2>
        <p id="summary-notes" style="margin-bottom: 0;">Configuration notes will appear here</p>
    </div>

    <!-- Saved Configs -->
    <div class="saved-configs-card">
        <h2>Saved Configurations</h2>
        <div class="button-group">
            <button onclick="saveConfiguration()" style="background-color: #10b981;">Save Config</button>
            <button onclick="loadConfiguration()" style="background-color: #3b82f6;">Load Latest</button>
            <button onclick="clearOldConfigs()" style="background-color: #ef4444;">Delete Old Configs</button>
        </div>
        <div id="saved-configs" style="margin-top: 15px;"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>
